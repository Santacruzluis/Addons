<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="custom_external_layout_header">
        <div class="header" t-att-style="report_header_style">
            <div class="row">
                <div class="col-3">
                    <img t-if="company.logo" t-att-src="image_data_uri(company.logo)" alt="Logo" style="max-height: 45px;"/>
                </div>
                <div class="col-9 text-end" style="margin-top:10px; font-size: 9px;">
                    <div t-field="company.partner_id" 
                         t-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": true}'/>
                    <div t-if="company.vat">NIF: <span t-field="company.vat"/></div>
                    <div t-if="company.phone">Tel: <span t-field="company.phone"/></div>
                    <div t-if="company.email">Email: <span t-field="company.email"/></div>
                </div>
            </div>
            <div class="row zero_min_height">
                <div class="col-12">
                    <div style="border-bottom: 1px solid black;"/>
                </div>
            </div>
        </div>
    </template>
    
    <template id="custom_external_layout_footer">
        <div class="footer" t-att-style="report_footer_style" style="font-size: 8px;">
            <div class="row">
                <div class="col-6">
                    <span t-field="company.report_footer"/>
                </div>
                <div class="col-6 text-end">
                    <ul class="list-inline mb-0">
                        <li class="list-inline-item">PÃ¡gina:</li>
                        <li class="list-inline-item"><span class="page"/></li>
                        <li class="list-inline-item">/</li>
                        <li class="list-inline-item"><span class="topage"/></li>
                    </ul>
                </div>
            </div>
        </div>
    </template>
    
    <template id="custom_external_layout">
        <t t-if="not o" t-set="o" t-value="doc"/>
        <t t-if="not company">
            <t t-if="company_id">
                <t t-set="company" t-value="company_id"/>
            </t>
            <t t-elif="o and 'company_id' in o">
                <t t-set="company" t-value="o.company_id.sudo()"/>
            </t>
            <t t-else="else">
                <t t-set="company" t-value="res_company"/>
            </t>
        </t>
        
        <t t-set="report_header_style" t-value="''"/>
        <t t-set="report_footer_style" t-value="''"/>
        
        <t t-call="custom_print.custom_external_layout_header"/>
        <t t-raw="0"/>
        <t t-call="custom_print.custom_external_layout_footer"/>
    </template>
    
    <template id="layout" inherit_id="web.external_layout" primary="True">
        <xpath expr="//t[@t-call='web.external_layout_standard']" position="replace">
            <t t-if="env['ir.config_parameter'].sudo().get_param('custom_print.enable_custom_print')">
                <t t-call="custom_print.custom_external_layout"/>
            </t>
            <t t-else="">
                <t t-call="web.external_layout_standard"/>
            </t>
        </xpath>
    </template>
</odoo>